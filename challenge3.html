<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Code Quest - Challenge 2</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet" />

  <style>
    body {
      background-color: #1e1e1e;
      color: #e0e0e0;
      font-family: 'JetBrains Mono', monospace;
      padding: 2rem;
    }
    .container {
      max-width: 1500px;
      margin: auto;
    }
    h1 {
      margin-bottom: 1rem;
    }
    .problem-description {
      background: #272727;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    textarea {
      width: 100%;
      height: 200px;
      background: #141414;
      color: #00ffa6;
      border: none;
      border-radius: 6px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      padding: 1rem;
      resize: vertical;
    }
    .console {
      background: #141414;
      color: #00ffa6;
      padding: 1rem;
      border-radius: 6px;
      height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      margin-top: 1rem;
      font-size: 0.9rem;
    }
    button {
      margin-top: 1rem;
      background-color: #00bcd4;
      border: none;
      color: white;
      font-weight: bold;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #0097a7;
    }
  </style>
</head>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>

<body>
  <div class="container">
    <h1>Challenge 1: Sum of Two Numbers</h1>

    <div class="problem-description">
      <p><strong>Problem:</strong> Write a JavaScript function <code>sum(a, b)</code> that returns the sum of two numbers.</p>
      <p>Example:</p>
      <pre>sum(3, 5) should return 8</pre>
    </div>

    <label for="code">Write your function below:</label>
    <textarea id="code" spellcheck="false">
// Write your sum function here
function sum(a, b) {
  // Your code
}
    </textarea>
     <div id="button-container" style="display: flex; justify-content: center; gap: 1.5rem; margin-top: 1rem;">
      <button id="prevBtn">⬅️ Previous</button>
      <button id="runBtn">Run Code</button>
      <button id="nextBtn">➡️ Next</button>
    </div>

    <div id="scoreDisplay" style="text-align: center; margin-top: 0.5rem; font-weight: bold;">
      Score: 0 / 25
    </div>

    <div class="console" id="output"></div>
    
  </div>

  <script>
  // ✅ Firebase config — untouched
  const firebaseConfig = {
    apiKey: "AIzaSyBTqasiZ6zn3D2oFdtwQFR8YowBGyUTzoI",
    authDomain: "code-quest-c5cc6.firebaseapp.com",
    projectId: "code-quest-c5cc6",
    storageBucket: "code-quest-c5cc6.firebasestorage.app",
    messagingSenderId: "166511404658",
    appId: "1:166511404658:web:1d78060d55a26eaff884eb"
  };

  // Medium-Level JavaScript Challenges

const tasks = [
  {
  title: "Challenge 1: Deep Clone Object",
  functionName: "deepClone",
  test: "JSON.stringify(deepClone({a:1, b:{c:2}}))",
  expected: JSON.stringify({a:1, b:{c:2}}),
  description: "Write a function <code>deepClone(obj)</code> that creates a deep copy of a given object.",
  example: "deepClone({a:1, b:{c:2}}) should return a new deep copy",
  starterCode: "function deepClone(obj) {\n  // your code\n}"
},
{
  title: "Challenge 2: Fibonacci with Memoization",
  functionName: "fibonacci",
  test: "fibonacci(10)",
  expected: 55,
  description: "Write a function <code>fibonacci(n)</code> using memoization that returns the nth Fibonacci number.",
  example: "fibonacci(10) should return 55",
  starterCode: "function fibonacci(n, memo = {}) {\n  // your code\n}"
},
{
  title: "Challenge 3: Throttle Function",
  functionName: "throttle",
  test: "typeof throttle(() => {}, 100)",
  expected: "function",
  description: "Write a function <code>throttle(func, limit)</code> that limits a function to fire at most once every 'limit' ms.",
  example: "Useful for limiting API calls on scroll",
  starterCode: "function throttle(func, limit) {\n  // your code\n}"
},
{
  title: "Challenge 4: Debounce Function",
  functionName: "debounce",
  test: "typeof debounce(() => {}, 300)",
  expected: "function",
  description: "Write a function <code>debounce(func, delay)</code> that delays invoking 'func' until after 'delay' milliseconds of inactivity.",
  example: "Useful for search inputs",
  starterCode: "function debounce(func, delay) {\n  // your code\n}"
},
{
  title: "Challenge 5: Flatten Nested Array",
  functionName: "flatten",
  test: "flatten([1, [2, [3, 4]]]).toString()",
  expected: "1,2,3,4",
  description: "Write a function <code>flatten(arr)</code> that flattens a nested array into a single-level array.",
  example: "flatten([1, [2, [3, 4]]]) should return [1, 2, 3, 4]",
  starterCode: "function flatten(arr) {\n  // your code\n}"
},
{
  title: "Challenge 6: Deep Compare Objects",
  functionName: "deepEqual",
  test: "deepEqual({a:1}, {a:1})",
  expected: true,
  description: "Write a function <code>deepEqual(a, b)</code> that checks for deep equality between two values.",
  example: "deepEqual({a:1}, {a:1}) should return true",
  starterCode: "function deepEqual(a, b) {\n  // your code\n}"
},
{
  title: "Challenge 7: Compose Functions",
  functionName: "compose",
  test: "compose(x => x + 1, x => x * 2)(5)",
  expected: 11,
  description: "Write a function <code>compose(f, g)</code> that returns a function applying f(g(x)).",
  example: "compose(f, g)(x) = f(g(x))",
  starterCode: "function compose(f, g) {\n  return function(x) {\n    // your code\n  }\n}"
},
{
  title: "Challenge 8: Validate Brackets",
  functionName: "validateBrackets",
  test: "validateBrackets('({[]})')",
  expected: true,
  description: "Write a function <code>validateBrackets(str)</code> that returns true if all brackets are properly closed and nested.",
  example: "validateBrackets('({[]})') should return true",
  starterCode: "function validateBrackets(str) {\n  // your code\n}"
},
{
  title: "Challenge 9: Event Emitter",
  functionName: "createEmitter",
  test: "typeof createEmitter().on",
  expected: "function",
  description: "Create an event emitter with <code>on</code>, <code>emit</code>, and <code>off</code> methods.",
  example: "emitter.on('event', callback); emitter.emit('event');",
  starterCode: "function createEmitter() {\n  // your code\n}"
},
{
  title: "Challenge 10: Currying Function",
  functionName: "curry",
  test: "curry((a, b, c) => a + b + c)(1)(2)(3)",
  expected: 6,
  description: "Write a function <code>curry(fn)</code> that transforms a multi-argument function into a curried version.",
  example: "curry(fn)(1)(2)(3)",
  starterCode: "function curry(fn) {\n  // your code\n}"
},
{
  title: "Challenge 11: Implement a LRU Cache",
  functionName: "LRUCache",
  test: "typeof new LRUCache(2).get",
  expected: "function",
  description: "Implement a class <code>LRUCache</code> with <code>get</code> and <code>put</code> methods for least recently used cache.",
  example: "const cache = new LRUCache(2);",
  starterCode: "class LRUCache {\n  constructor(capacity) {\n    // your code\n  }\n}"
},
{
  title: "Challenge 12: Serialize and Deserialize Binary Tree",
  functionName: "serializeTree",
  test: "typeof serializeTree({ val: 1, left: null, right: null })",
  expected: "string",
  description: "Write a function <code>serializeTree(root)</code> and <code>deserializeTree(str)</code> to convert a binary tree to a string and back.",
  example: "serializeTree and deserializeTree functions",
  starterCode: "function serializeTree(root) {\n  // your code\n}\n\nfunction deserializeTree(data) {\n  // your code\n}"
},
{
  title: "Challenge 13: Kth Largest Element",
  functionName: "findKthLargest",
  test: "findKthLargest([3,2,1,5,6,4], 2)",
  expected: 5,
  description: "Write a function <code>findKthLargest(nums, k)</code> that returns the kth largest element.",
  example: "findKthLargest([3,2,1,5,6,4], 2) should return 5",
  starterCode: "function findKthLargest(nums, k) {\n  // your code\n}"
},
{
  title: "Challenge 14: Promisify a Function",
  functionName: "promisify",
  test: "typeof promisify(fs.readFile)",
  expected: "function",
  description: "Write a function <code>promisify(fn)</code> that converts Node-style callbacks to Promises.",
  example: "promisify(callbackFunction)",
  starterCode: "function promisify(fn) {\n  // your code\n}"
},
{
  title: "Challenge 15: Retry Async Function",
  functionName: "retry",
  test: "typeof retry(() => Promise.resolve('ok'), 3)",
  expected: "function",
  description: "Write a function <code>retry(fn, attempts)</code> that retries an async function 'attempts' times on failure.",
  example: "retry(() => fetch(url), 3)",
  starterCode: "async function retry(fn, attempts) {\n  // your code\n}"
},
{
  title: "Challenge 16: Binary Search Tree Validation",
  functionName: "isValidBST",
  test: "isValidBST({ val: 2, left: { val: 1 }, right: { val: 3 } })",
  expected: true,
  description: "Write a function <code>isValidBST(root)</code> that checks whether a binary tree is a valid BST.",
  example: "isValidBST(root) should return true or false",
  starterCode: "function isValidBST(root) {\n  // your code\n}"
},
{
  title: "Challenge 17: Implement Call, Apply, Bind",
  functionName: "customCall",
  test: "customCall(function() { return this.a; }, { a: 5 })",
  expected: 5,
  description: "Implement custom versions of <code>call</code>, <code>apply</code>, and <code>bind</code>.",
  example: "customCall(fn, context, ...args)",
  starterCode: "function customCall(fn, context, ...args) {\n  // your code\n}"
},
{
  title: "Challenge 18: Serialize JSON with Circular Refs",
  functionName: "safeStringify",
  test: "safeStringify(objWithCircularRef)",
  expected: "string",
  description: "Write a <code>safeStringify(obj)</code> that stringifies an object with circular references safely.",
  example: "safeStringify(obj)",
  starterCode: "function safeStringify(obj) {\n  // your code\n}"
},
{
  title: "Challenge 19: Top K Frequent Elements",
  functionName: "topKFrequent",
  test: "topKFrequent([1,1,1,2,2,3], 2).sort().toString()",
  expected: "1,2",
  description: "Write a function <code>topKFrequent(nums, k)</code> that returns the k most frequent elements.",
  example: "topKFrequent([1,1,1,2,2,3], 2)",
  starterCode: "function topKFrequent(nums, k) {\n  // your code\n}"
},
{
  title: "Challenge 20: Implement Async Pool",
  functionName: "asyncPool",
  test: "typeof asyncPool(2, tasks, taskFn)",
  expected: "object",
  description: "Write an <code>asyncPool(limit, tasks, taskFn)</code> that runs tasks in parallel up to 'limit'.",
  example: "asyncPool(2, [1,2,3,4], fn)",
  starterCode: "async function asyncPool(limit, tasks, taskFn) {\n  // your code\n}"
},
{
  title: "Challenge 21: Detect Cycle in Linked List",
  functionName: "hasCycle",
  test: "hasCycle(listWithCycle)",
  expected: true,
  description: "Write a function <code>hasCycle(head)</code> that detects a cycle in a linked list.",
  example: "hasCycle(list)",
  starterCode: "function hasCycle(head) {\n  // your code\n}"
},
{
  title: "Challenge 22: Implement Quick Sort",
  functionName: "quickSort",
  test: "quickSort([3,1,2,4]).toString()",
  expected: "1,2,3,4",
  description: "Write a function <code>quickSort(arr)</code> that sorts an array using the Quick Sort algorithm.",
  example: "quickSort([3,1,2,4])",
  starterCode: "function quickSort(arr) {\n  // your code\n}"
},
{
  title: "Challenge 23: Implement a Pipe Function",
  functionName: "pipe",
  test: "pipe(x => x + 1, x => x * 2)(3)",
  expected: 8,
  description: "Write a function <code>pipe(...fns)</code> that pipes multiple functions from left to right.",
  example: "pipe(f1, f2, f3)(input)",
  starterCode: "function pipe(...fns) {\n  // your code\n}"
},
{
  title: "Challenge 24: Serialize Function",
  functionName: "serializeFn",
  test: "typeof serializeFn(() => 1)",
  expected: "string",
  description: "Write a function <code>serializeFn(fn)</code> that returns a string version of a function and its scope (if possible).",
  example: "serializeFn(fn)",
  starterCode: "function serializeFn(fn) {\n  // your code\n}"
},
{
  title: "Challenge 25: Word Ladder (Shortest Transformation)",
  functionName: "wordLadder",
  test: "wordLadder('hit', 'cog', ['hot','dot','dog','lot','log','cog'])",
  expected: 5,
  description: "Write a function <code>wordLadder(beginWord, endWord, wordList)</code> that finds the shortest transformation sequence from beginWord to endWord.",
  example: "wordLadder('hit', 'cog', ['hot','dot','dog','lot','log','cog'])",
  starterCode: "function wordLadder(beginWord, endWord, wordList) {\n  // your code\n}"
}
]

 
    let currentTask = 0;
    let score = 0;

    const runBtn = document.getElementById("runBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const codeArea = document.getElementById("code");
    const output = document.getElementById("output");
    const taskTitle = document.querySelector("h1");
    const descriptionBox = document.querySelector(".problem-description");

    const loadTask = (index) => {
      const task = tasks[index];
      taskTitle.textContent = task.title;
      descriptionBox.innerHTML = `
        <p><strong>Problem:</strong> ${task.description}</p>
        <p>Example:</p>
        <pre>${task.example}</pre>
      `;
      codeArea.value = task.starterCode;
      output.textContent = "";
      scoreDisplay.textContent = `Score: ${score} / ${tasks.length}`;
    };

    runBtn.addEventListener("click", () => {
      const task = tasks[currentTask];
      const userCode = codeArea.value;
      try {
        const userFunc = new Function(userCode + "; return " + task.test + ";");
        const result = userFunc();
        if (result === task.expected) {
          output.textContent = `✅ Correct! ${task.test} returned ${result}`;
          output.style.color = "#00ff00";
          score++;
          scoreDisplay.textContent = `Score: ${score} / ${tasks.length}`;
        } else {
          output.textContent = `❌ Incorrect result: ${task.test} returned ${result}`;
          output.style.color = "#ff5555";
        }
      } catch (err) {
        output.textContent = "❌ Error: " + err.message;
        output.style.color = "#ff5555";
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentTask < tasks.length - 1) {
        currentTask++;
        loadTask(currentTask);
      }
    });

    prevBtn.addEventListener("click", () => {
      if (currentTask > 0) {
        currentTask--;
        loadTask(currentTask);
      }
    });
    // Load initial task
    loadTask(currentTask);
  </script>
</body>
</html>
